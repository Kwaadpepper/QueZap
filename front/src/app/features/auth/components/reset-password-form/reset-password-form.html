<div class="flex flex-col justify-center items-center h-full">
  <div class="relative">
    <h1 class="mb-5">Réinitialisation du mot de passe</h1>
  </div>

  <form
    class="flex flex-col justify-center"
    [inert]="resetForm().submitting()"
    (submit)="onReset(); $event.preventDefault()"
  >
    @if (anErrorOccured()) {
    <div class="flex">
      <p-message severity="error" class="mb-4">
        <span>
          Une erreur est survenue lors de la demande de réinitialisation. Veuillez réessayer plus
          tard.
        </span>
      </p-message>
    </div>
    }
    <div class="flex flex-col md:items-center gap-4 mb-4 mx-auto">
      <label for="password" class="font-semibold md:w-40 md:me-30">Nouveau mot de passe</label>
      <input
        pInputText
        id="password"
        class="flex-auto w-full"
        autocomplete="new-password"
        type="password"
        quizzFieldError
        [field]="resetForm.password"
        [fieldState]="resetForm.password"
      />
    </div>

    <div class="flex flex-col md:items-center gap-4 mb-8 mx-auto">
      <label for="password-confirmation" class="font-semibold md:w-40 md:me-30">
        Confirmez le mot de passe
      </label>
      <input
        pInputText
        id="password-confirmation"
        class="flex-auto w-full"
        autocomplete="current-password"
        type="password"
        quizzFieldError
        [field]="resetForm.confirmPassword"
        [fieldState]="resetForm.confirmPassword"
      />
    </div>

    <div class="flex justify-center gap-2 relative">
      @if(isDebug()) {
      <p-button
        type="button"
        class="bottom-1/2 translate-y-1/2 relative"
        title="Remplir avec des valeurs factices"
        severity="info"
        outlined
        (onClick)="onFillMockedValues()"
      >
        <i class="pi pi-android" pButtonIcon></i>
      </p-button>
      }
      <p-button
        label="Réinitialiser le mot de passe"
        type="submit"
        [disabled]="
          this.resetForm().submitting() || !this.resetForm().dirty() || this.resetForm().invalid()
        "
      >
        @if(this.resetForm().submitting()) {
        <i class="pi pi-cog pi-spin" pButtonIcon></i>
        }
      </p-button>
    </div>
  </form>
</div>
