<div class="flex h-full flex-col items-center justify-center">
  <div class="relative">
    <h1 class="mb-5">Mot de passe oublié</h1>

    <quizz-back-button class="-top-15! -left-5! md:top-0! md:-left-15!" backUrl="/auth/login" />
  </div>

  <form
    class="flex flex-col justify-center"
    [inert]="this.resetForm().submitting()"
    (submit)="onAskToReset(); $event.preventDefault()"
  >
    @if (hasBeenAskedToReset()) {
      <div class="flex">
        <p-message severity="success" class="mb-4">
          <span>
            Si votre email est enregistré, vous devriez en recevoir un qui contient un lien pour
            réinitialiser votre mot de passe. Pensez à vérifier votre dossier de courriers
            indésirables.
          </span>
        </p-message>
      </div>
    }
    @if (errorHasOccured()) {
      <div class="flex">
        <p-message severity="error" class="mb-4">
          <span>
            Une erreur est survenue lors de la demande de réinitialisation. Veuillez réessayer plus
            tard.
          </span>
        </p-message>
      </div>
    }
    <div class="mx-auto mb-8 flex flex-col gap-4 md:items-center">
      <label for="email" class="font-semibold md:me-30 md:w-40">Email</label>
      <input
        pInputText
        id="email"
        class="w-full flex-auto"
        autocomplete="email"
        type="email"
        quizzFieldError
        [field]="resetForm.email"
        [fieldState]="resetForm.email"
      />
    </div>
    <div class="relative flex justify-center gap-2">
      @if (isDebug()) {
        <p-button
          type="button"
          class="relative bottom-1/2 translate-y-1/2"
          title="Utiliser des identifiants de test"
          severity="info"
          outlined
          (onClick)="onFillMockedValue()"
        >
          <quizz-icon name="debug" pButtonIcon />
        </p-button>
      }
      <p-button
        label="Réinitialiser le mot de passe"
        type="submit"
        [disabled]="
          this.resetForm().submitting() || !this.resetForm().dirty() || this.resetForm().invalid()
        "
      >
        @if (this.resetForm().submitting()) {
          <quizz-icon name="cog" animation="spin" pButtonIcon />
        }
      </p-button>
    </div>
  </form>
</div>
