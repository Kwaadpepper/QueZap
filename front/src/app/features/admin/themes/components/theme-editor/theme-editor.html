<p-dialog
  [modal]="true"
  [pt]="{ root: { class: 'md:max-w-6/8 lg:md:max-w-5/8' } }"
  (onShow)="onShow()"
  [(visible)]="visible"
>
  <ng-template #header>
    <div class="mx-4 inline-flex items-center justify-center gap-2">
      @if (forUpdateAction()) {
        <quizz-icon name="pencil" size="lg" />
        <span class="font-bold whitespace-nowrap">Modifier le thème</span>
      } @else {
        <quizz-icon name="plus" size="lg" />
        <span class="font-bold whitespace-nowrap">Créer un nouveau thème</span>
      }
    </div>
  </ng-template>

  @if (errorOccurred()) {
    <p-message severity="error" class="mb-4">
      <span> Une erreur est survenue. Veuillez réessayer. </span>
    </p-message>
  }
  <form
    class="flex flex-col justify-center"
    [inert]="this.themeForm().submitting()"
    (submit)="onSave(); $event.preventDefault()"
  >
    <div class="mx-auto mb-8 flex flex-col items-center gap-4">
      <label for="name" class="me-30 w-24 font-semibold">Nom du thème</label>
      <input
        pInputText
        id="text"
        class="flex-auto"
        autocomplete="off"
        type="text"
        quizzFieldError
        [field]="themeForm.name"
        [fieldState]="themeForm.name"
      />
    </div>
    <div class="flex justify-end gap-2">
      <p-button label="Fermer" severity="secondary" (onClick)="onCancel()" />
      <p-button
        label="Enregistrer"
        type="submit"
        [disabled]="this.themeForm().invalid() || this.themeForm().submitting()"
      >
        @if (this.themeForm().submitting()) {
          <quizz-icon name="cog" animation="spin" pButtonIcon />
        }
      </p-button>
    </div>
  </form>
</p-dialog>
